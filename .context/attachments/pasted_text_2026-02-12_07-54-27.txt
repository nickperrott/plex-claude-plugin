nick@Mac montreal-v1 % uv run --env-file .env plex-mcp
2026-02-12 07:53:39,235 - server.main - INFO - Starting Plex MCP Server...
2026-02-12 07:53:39,236 - server.main - INFO - Connecting to Plex server at http://10.9.8.234:32400...
  + Exception Group Traceback (most recent call last):
  |   File "/Users/nick/conductor/workspaces/plex-claude-plugin/montreal-v1/venv/bin/plex-mcp", line 10, in <module>
  |     sys.exit(main())
  |              ~~~~^^
  |   File "/Users/nick/conductor/workspaces/plex-claude-plugin/montreal-v1/server/main.py", line 391, in main
  |     mcp.run()
  |     ~~~~~~~^^
  |   File "/Users/nick/conductor/workspaces/plex-claude-plugin/montreal-v1/venv/lib/python3.14/site-packages/mcp/server/fastmcp/server.py", line 296, in run
  |     anyio.run(self.run_stdio_async)
  |     ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  |   File "/Users/nick/conductor/workspaces/plex-claude-plugin/montreal-v1/venv/lib/python3.14/site-packages/anyio/_core/_eventloop.py", line 77, in run
  |     return async_backend.run(func, args, {}, backend_options)
  |            ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  |   File "/Users/nick/conductor/workspaces/plex-claude-plugin/montreal-v1/venv/lib/python3.14/site-packages/anyio/_backends/_asyncio.py", line 2342, in run
  |     return runner.run(wrapper())
  |            ~~~~~~~~~~^^^^^^^^^^^
  |   File "/opt/homebrew/Cellar/python@3.14/3.14.2/Frameworks/Python.framework/Versions/3.14/lib/python3.14/asyncio/runners.py", line 127, in run
  |     return self._loop.run_until_complete(task)
  |            ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  |   File "/opt/homebrew/Cellar/python@3.14/3.14.2/Frameworks/Python.framework/Versions/3.14/lib/python3.14/asyncio/base_events.py", line 719, in run_until_complete
  |     return future.result()
  |            ~~~~~~~~~~~~~^^
  |   File "/Users/nick/conductor/workspaces/plex-claude-plugin/montreal-v1/venv/lib/python3.14/site-packages/anyio/_backends/_asyncio.py", line 2325, in wrapper
  |     return await func(*args)
  |            ^^^^^^^^^^^^^^^^^
  |   File "/Users/nick/conductor/workspaces/plex-claude-plugin/montreal-v1/venv/lib/python3.14/site-packages/mcp/server/fastmcp/server.py", line 755, in run_stdio_async
  |     async with stdio_server() as (read_stream, write_stream):
  |                ~~~~~~~~~~~~^^
  |   File "/opt/homebrew/Cellar/python@3.14/3.14.2/Frameworks/Python.framework/Versions/3.14/lib/python3.14/contextlib.py", line 235, in __aexit__
  |     await self.gen.athrow(value)
  |   File "/Users/nick/conductor/workspaces/plex-claude-plugin/montreal-v1/venv/lib/python3.14/site-packages/mcp/server/stdio.py", line 85, in stdio_server
  |     async with anyio.create_task_group() as tg:
  |                ~~~~~~~~~~~~~~~~~~~~~~~^^
  |   File "/Users/nick/conductor/workspaces/plex-claude-plugin/montreal-v1/venv/lib/python3.14/site-packages/anyio/_backends/_asyncio.py", line 783, in __aexit__
  |     raise BaseExceptionGroup(
  |         "unhandled errors in a TaskGroup", self._exceptions
  |     ) from None
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "/Users/nick/conductor/workspaces/plex-claude-plugin/montreal-v1/venv/lib/python3.14/site-packages/urllib3/connection.py", line 204, in _new_conn
    |     sock = connection.create_connection(
    |         (self._dns_host, self.port),
    |     ...<2 lines>...
    |         socket_options=self.socket_options,
    |     )
    |   File "/Users/nick/conductor/workspaces/plex-claude-plugin/montreal-v1/venv/lib/python3.14/site-packages/urllib3/util/connection.py", line 85, in create_connection
    |     raise err
    |   File "/Users/nick/conductor/workspaces/plex-claude-plugin/montreal-v1/venv/lib/python3.14/site-packages/urllib3/util/connection.py", line 73, in create_connection
    |     sock.connect(sa)
    |     ~~~~~~~~~~~~^^^^
    | OSError: [Errno 65] No route to host
    | 
    | The above exception was the direct cause of the following exception:
    | 
    | Traceback (most recent call last):
    |   File "/Users/nick/conductor/workspaces/plex-claude-plugin/montreal-v1/venv/lib/python3.14/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    |     response = self._make_request(
    |         conn,
    |     ...<10 lines>...
    |         **response_kw,
    |     )
    |   File "/Users/nick/conductor/workspaces/plex-claude-plugin/montreal-v1/venv/lib/python3.14/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    |     conn.request(
    |     ~~~~~~~~~~~~^
    |         method,
    |         ^^^^^^^
    |     ...<6 lines>...
    |         enforce_content_length=enforce_content_length,
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |     )
    |     ^
    |   File "/Users/nick/conductor/workspaces/plex-claude-plugin/montreal-v1/venv/lib/python3.14/site-packages/urllib3/connection.py", line 500, in request
    |     self.endheaders()
    |     ~~~~~~~~~~~~~~~^^
    |   File "/opt/homebrew/Cellar/python@3.14/3.14.2/Frameworks/Python.framework/Versions/3.14/lib/python3.14/http/client.py", line 1353, in endheaders
    |     self._send_output(message_body, encode_chunked=encode_chunked)
    |     ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/opt/homebrew/Cellar/python@3.14/3.14.2/Frameworks/Python.framework/Versions/3.14/lib/python3.14/http/client.py", line 1113, in _send_output
    |     self.send(msg)
    |     ~~~~~~~~~^^^^^
    |   File "/opt/homebrew/Cellar/python@3.14/3.14.2/Frameworks/Python.framework/Versions/3.14/lib/python3.14/http/client.py", line 1057, in send
    |     self.connect()
    |     ~~~~~~~~~~~~^^
    |   File "/Users/nick/conductor/workspaces/plex-claude-plugin/montreal-v1/venv/lib/python3.14/site-packages/urllib3/connection.py", line 331, in connect
    |     self.sock = self._new_conn()
    |                 ~~~~~~~~~~~~~~^^
    |   File "/Users/nick/conductor/workspaces/plex-claude-plugin/montreal-v1/venv/lib/python3.14/site-packages/urllib3/connection.py", line 219, in _new_conn
    |     raise NewConnectionError(
    |         self, f"Failed to establish a new connection: {e}"
    |     ) from e
    | urllib3.exceptions.NewConnectionError: HTTPConnection(host='10.9.8.234', port=32400): Failed to establish a new connection: [Errno 65] No route to host
    | 
    | The above exception was the direct cause of the following exception:
    | 
    | Traceback (most recent call last):
    |   File "/Users/nick/conductor/workspaces/plex-claude-plugin/montreal-v1/venv/lib/python3.14/site-packages/requests/adapters.py", line 644, in send
    |     resp = conn.urlopen(
    |         method=request.method,
    |     ...<9 lines>...
    |         chunked=chunked,
    |     )
    |   File "/Users/nick/conductor/workspaces/plex-claude-plugin/montreal-v1/venv/lib/python3.14/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    |     retries = retries.increment(
    |         method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    |     )
    |   File "/Users/nick/conductor/workspaces/plex-claude-plugin/montreal-v1/venv/lib/python3.14/site-packages/urllib3/util/retry.py", line 535, in increment
    |     raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    | urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='10.9.8.234', port=32400): Max retries exceeded with url: / (Caused by NewConnectionError("HTTPConnection(host='10.9.8.234', port=32400): Failed to establish a new connection: [Errno 65] No route to host"))
    | 
    | During handling of the above exception, another exception occurred:
    | 
    | Traceback (most recent call last):
    |   File "/Users/nick/conductor/workspaces/plex-claude-plugin/montreal-v1/venv/lib/python3.14/site-packages/mcp/server/stdio.py", line 88, in stdio_server
    |     yield read_stream, write_stream
    |   File "/Users/nick/conductor/workspaces/plex-claude-plugin/montreal-v1/venv/lib/python3.14/site-packages/mcp/server/fastmcp/server.py", line 756, in run_stdio_async
    |     await self._mcp_server.run(
    |     ...<3 lines>...
    |     )
    |   File "/Users/nick/conductor/workspaces/plex-claude-plugin/montreal-v1/venv/lib/python3.14/site-packages/mcp/server/lowlevel/server.py", line 657, in run
    |     lifespan_context = await stack.enter_async_context(self.lifespan(self))
    |                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/opt/homebrew/Cellar/python@3.14/3.14.2/Frameworks/Python.framework/Versions/3.14/lib/python3.14/contextlib.py", line 668, in enter_async_context
    |     result = await _enter(cm)
    |              ^^^^^^^^^^^^^^^^
    |   File "/opt/homebrew/Cellar/python@3.14/3.14.2/Frameworks/Python.framework/Versions/3.14/lib/python3.14/contextlib.py", line 214, in __aenter__
    |     return await anext(self.gen)
    |            ^^^^^^^^^^^^^^^^^^^^^
    |   File "/Users/nick/conductor/workspaces/plex-claude-plugin/montreal-v1/venv/lib/python3.14/site-packages/mcp/server/fastmcp/server.py", line 140, in wrap
    |     async with lifespan(app) as context:
    |                ~~~~~~~~^^^^^
    |   File "/opt/homebrew/Cellar/python@3.14/3.14.2/Frameworks/Python.framework/Versions/3.14/lib/python3.14/contextlib.py", line 214, in __aenter__
    |     return await anext(self.gen)
    |            ^^^^^^^^^^^^^^^^^^^^^
    |   File "/Users/nick/conductor/workspaces/plex-claude-plugin/montreal-v1/server/main.py", line 61, in lifespan
    |     plex_client = create_plex_client()
    |   File "/Users/nick/conductor/workspaces/plex-claude-plugin/montreal-v1/server/client.py", line 210, in create_plex_client
    |     server = PlexServer(plex_url, plex_token)
    |   File "/Users/nick/conductor/workspaces/plex-claude-plugin/montreal-v1/venv/lib/python3.14/site-packages/plexapi/server.py", line 109, in __init__
    |     data = self.query(self.key, timeout=self._timeout)
    |   File "/Users/nick/conductor/workspaces/plex-claude-plugin/montreal-v1/venv/lib/python3.14/site-packages/plexapi/server.py", line 748, in query
    |     response = method(url, headers=headers, params=params, timeout=timeout, **kwargs)
    |   File "/Users/nick/conductor/workspaces/plex-claude-plugin/montreal-v1/venv/lib/python3.14/site-packages/requests/sessions.py", line 602, in get
    |     return self.request("GET", url, **kwargs)
    |            ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
    |   File "/Users/nick/conductor/workspaces/plex-claude-plugin/montreal-v1/venv/lib/python3.14/site-packages/requests/sessions.py", line 589, in request
    |     resp = self.send(prep, **send_kwargs)
    |   File "/Users/nick/conductor/workspaces/plex-claude-plugin/montreal-v1/venv/lib/python3.14/site-packages/requests/sessions.py", line 703, in send
    |     r = adapter.send(request, **kwargs)
    |   File "/Users/nick/conductor/workspaces/plex-claude-plugin/montreal-v1/venv/lib/python3.14/site-packages/requests/adapters.py", line 677, in send
    |     raise ConnectionError(e, request=request)
    | requests.exceptions.ConnectionError: HTTPConnectionPool(host='10.9.8.234', port=32400): Max retries exceeded with url: / (Caused by NewConnectionError("HTTPConnection(host='10.9.8.234', port=32400): Failed to establish a new connection: [Errno 65] No route to host"))
    +------------------------------------
nick@Mac montreal-v1 % ping 10.9.8.234
PING 10.9.8.234 (10.9.8.234): 56 data bytes
64 bytes from 10.9.8.234: icmp_seq=0 ttl=64 time=10.016 ms
64 bytes from 10.9.8.234: icmp_seq=1 ttl=64 time=2.001 ms
^C
--- 10.9.8.234 ping statistics ---
2 packets transmitted, 2 packets received, 0.0% packet loss
round-trip min/avg/max/stddev = 2.001/6.008/10.016/4.008 ms
nick@Mac montreal-v1 % 